<ion-view title="Bütçe Detayları" id="budget-detail">
  <ion-nav-buttons side="left">
    <button menu-toggle="left"class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-nav-buttons side="right">
    <button class="button button-icon icon ion-gear-a" ng-click="vm.showBudgetForm()"></button>
  </ion-nav-buttons>

  <ion-content class="has-header">
    <div class="content-heading padding">
      <h3>{{ vm.budget.name }}</h3>
      <p>
        {{ vm.budget.startDate | date }} - {{ vm.budget.endDate | date }}
        <span ng-if="vm.budget.isRepeating"> (Tekrar Eden B.)</span>
      </p>

      <button class="button button-clear clear-small button-positive" ng-click="vm.showBudgetPeriodSelector()">
        Geçmiş Dönemler
      </button>

    </div>

    <highchart id="chart1" config="vm.chartConfig"></highchart>

    <div class="todaySummary">
      <span class="heading">Bugünün Toplamı</span>
      <span class="amount">{{ vm.todaySpendings | number }} ₺</span>
    </div>

    <table class="summaryNumbers">
      <tbody>
        <tr>
          <td>
            <span>Bütçe</span><br/>
            <span class="highlight">{{ vm.budget.amount | number }} ₺</span>
          </td>
          <td>
            <span>Harcanan</span><br/>
            <span class="highlight">{{ vm.spent | number }} ₺</span>
          </td>
          <td>
            <span>Kalan</span><br/>
            <span class="highlight">{{ vm.remaining | number }} ₺</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>Kalan Gün</span><br/>
            <span class="highlight">{{ vm.daysToFinish }} gün</span>
          </td>
          <td>
            <span>Günlük Harcama</span><br/>
            <span class="highlight">{{ vm.dailyAverage | number:0 }} ₺</span>
          </td>
          <td>
            <span>Günlük Limit</span><br/>
            <span class="highlight">{{ vm.remaining / vm.daysToFinish | number:0 }} ₺</span>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="padding" style="margin-bottom:100px;">

      <table class="summaryTags">
        <thead>
          <tr>
            <td colspan="2">
              Etiketlere Göre Harcamalarım
            </td>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="tagTransactions in vm.transactionsOrderedByTag">
            <td>{{$index+1}}. {{tagTransactions.name}}</td>
            <td>{{tagTransactions.sumAmount | number}} ₺</td>
          </tr>
        </tbody>
      </table>

      <button class="button button-block button-positive padding" ng-click="vm.transactionList()">
        Bütün Harcama Hareketlerimi Göster
      </button>

    </div>

  </ion-content>
</ion-view>